// StP/Validator rules file.

Include "val/rules/uml/TGen.rules"
Include "val/rules/uml/generate_stp.rules"
Include "val/rules/uml/report.rules"

Include "val/sri/rules/stp_uml.rules"

//ECR 6209 start - remove last quote
//Include "thirdpartytools/mercury/rules/mercury.rules""
Include "thirdpartytools/mercury/rules/mercury.rules"
//ECR 6209 end
Include "thirdpartytools/segue/rules/segue.rules"

Class 0 Validator
{
  { Label "Requirements Validation" }
  { Image "use_cases" }
  { ShowOnDesktop True }
  { OMSObjects
      { Match "node[UmlUseCase && node_refs]" }
  } 

  { ClassCommand
      { Name "UseCaseTraceReport" }
      { Label "Generate Requirements Traceability Report" }
      { ShowPropsOnExec True }
      { Type Nowin } 
      { SingleObject False } 
      { Command "tdrv.exe qrp -p ${projdir} -s ${system} -x e_DOCAUTHOR '${prop.tdocauthor}' -x e_COMPANY '${prop.tcompany}' -x e_DIVISION '${prop.tdivision}' -x e_DOC_VERSION '${prop.tdocversion}' -x e_DOC_STATUS '${prop.tdocstatus}' -x e_REPORT_TYPE '${prop.targetformat}' -x e_DEFAULT_FORMAT '${prop.tformatfile}' -f ${prop.tformatfile} -t ${prop.targetformat}  -o ${projdir}${system}/test_files/TraceabilityReport.${prop.targetformat} val/qrl/GenerateTraceabilityReport.qrl" }
      { UseProperty TTargetFormat }
      { UseProperty TTFormatFile }
      { UseProperty TTDocAuthor }
      { UseProperty TTCompany }
      { UseProperty TTDivision }
      { UseProperty TTDocVersion }
      { UseProperty TTDocStatus }
      // { UseProperty UseCaseTraceReportProperties }
      { Properties
          { Qrl 
              { QrlFile "val/rules/qrl/report_cb.qrl" }
          }
          { Space
              { Name "tspace"}
          }  
          { Text
              { Name "tformatfile" }
              { Init "TraceabilityReportTemplate" }
          }
          { Choice
              { Name "targetformat" }
              { Event
                { Type Select }
                { Callback "selectReportType_cb" }
              }
          }
          { Group
              { Name "options5" }
              { Type Vertical }
              { Align Labels }
              { Align Bottom }
              { Members ( tdocauthor tcompany tdivision tspace tdocversion tdocstatus targetformat tformatfile ) }
          }
          { Group
              { Name "midcolumn1" }
              { Type Vertical }
              { Members ( options5 ) }
          }
          { Group
              { Name "All" }
              { Type Horizontal }
              { Members ( midcolumn1) }
          }
      }
  }

  { ObjectCommand
      { Name "Generate Requirements Document" }
      { ShowPropsOnExec True }
      { Type Nowin } 
      { SingleObject False } 
      { Command "tdrv.exe qrp -p ${projdir} -s ${system} -x UseCases '${cmd.objects}' -t ${prop.targetformat} -x e_DEFAULT_FORMAT '${prop.tformatfile}' -x e_DOCAUTHOR '${prop.tdocauthor}' -x e_COMPANY '${prop.tcompany}' -x e_DIVISION '${prop.tdivision}' -x e_DOC_VERSION '${prop.tdocversion}' -x e_DOC_STATUS '${prop.tdocstatus}' -x e_REPORT_TYPE '${prop.targetformat}' val/qrl/GenerateRequirementsDocument.qrl" }
      { UseProperty TTDocAuthor }
      { UseProperty TTCompany }
      { UseProperty TTDivision }
      { UseProperty TTDocVersion }
      { UseProperty TTDocStatus }
      { UseProperty TTargetFormat }
      { UseProperty TTFormatFile }
      // { UseProperty TTOutputFile }
      { Properties  
          { Space
              { Name "tspace"}
          }  
          { Text
              { Name "tformatfile" }
              { Init "SRSTemplate" }
          }
          { Group
              { Name "options5" }
              { Type Vertical }
              { Align Labels }
              { Align Bottom }
              { Members ( tdocauthor tcompany tdivision tspace tdocversion tdocstatus targetformat tformatfile) }
          }
          { Group
              { Name "midcolumn1" }
              { Type Vertical }
              { Members ( options5 ) }
          }
          { Group
              { Name "All" }
              { Type Horizontal }
              { Members ( midcolumn1) }
          }
      }
  }

    { ObjectCommand
        { Name "TGenClass" }
        { Label "Generate Test Cases ..." }
        { ShowPropsOnExec True }
        { Type Nowin } 
        { SingleObject False } 
        { Command "tdrv ${prop.tgen}" }
        { UseProperty TTGen }
        { UseProperty TTListExtras }
        { UseProperty TTSatisfyPreconditions }
        { UseProperty TTMsgLevel }
        { UseProperty TTSummaryLineSpacing }
        { Properties
            { Footer
                { Name "Footer1" }
                { LeftFooter "Choose Operation and Properties" }
            }
            { Activation 
                { Target "Footer1" }
                { OnInit Active }
            }
            { Footer
                { Name "Footer2" }
                { RightFooter "Generate Test Cases" }
            }
            { Activation 
                { Target "Footer2" }
                { OnInit Active }
            }
            { Group
                { Name "options0" }
                { Type Vertical }
//                { Align Labels }
//                { Align Middle }
                { Members ( tgen ) }
            }
            { Group
                { Name "midcolumn" }
                { Type Vertical }
                { Members (tsatisfypreconditions tlistextras  tsummarylinespacing tmsglevel ) }
            }
            { Group
                { Name "All" }
                { Type Horizontal }
                { Members ( options0 midcolumn) }
            }
        }
    }

  { ObjectCommand
      { Name "Generate Test Specification Document" }
      { ShowPropsOnExec True }
      { Type Nowin }
      { SingleObject False } 
      { Command "tdrv.exe qrp -p ${projdir} -s ${system} -x e_USECASES '${cmd.objects}' -x e_REPORT_FILE ${prop.toutputfile} -x e_REPORT_TYPE '${prop.targetformat}' -x e_DEFAULT_FORMAT '${prop.tformatfile}' -x e_DOCAUTHOR '${prop.tdocauthor}' -x e_COMPANY '${prop.tcompany}' -x e_DIVISION '${prop.tdivision}' -x e_DOC_VERSION '${prop.tdocversion}' -x e_DOC_STATUS '${prop.tdocstatus}' val/qrl/GenerateTestSpecification.qrl" }
      { UseProperty TTDocAuthor }
      { UseProperty TTCompany }
      { UseProperty TTDivision }
      { UseProperty TTDocVersion }
      { UseProperty TTDocStatus }
      { UseProperty TTargetFormat }
      { UseProperty TTFormatFile }
      { UseProperty TTOutputFile }
      { Properties
          { Space
              { Name "tspace"}
          } 
          { Text
              { Name "tformatfile" }
              { Init "TSTemplate" }
          }
          { Text
              { Name "toutputfile" }
              { Init "TS"}
          }
          { Group
              { Name "options5" }
              { Type Vertical }
              { Align Labels }
              { Align Bottom }
              { Members ( tdocauthor tcompany tdivision tspace tdocversion tdocstatus targetformat tformatfile toutputfile) }
          }
          { Group
              { Name "midcolumn1" }
              { Type Vertical }
              { Members ( options5 ) }
          }
          { Group
              { Name "All" }
              { Type Horizontal }
              { Members ( midcolumn1) }
          }
      }
  }
}


Class 0 ValidatorCustom
{
  { Label "Custom Integration" }
  { Image "use_cases" } 
  { ShowOnDesktop True }
  { OMSObjects
      { Match "node[UmlUseCase && node_refs]" }
  }

    { ObjectCommand
        { Name "TPrepareClass" }
        { Label "Generate Custom Test Scripts  ..." }
        { ShowPropsOnExec True }
        { Type Nowin }
        { Command "qrp -p ${projdir} -s ${system} -x UseCases '${cmd.objects}'  -x T_subactions ${prop.tprepareactions} -x T_substates ${prop.tpreparestates} -x T_subindices ${prop.tprepareindices}   -x T_message_level ${prop.tmsglevel} -x T_case_desc_file ${prop.tcasedescfile}  -x T_case_desc_dir ${prop.tcasedescdir} val/qrl/PrepareTestCases.qrl" }
        { UseProperty TTCaseDescFile }
        { UseProperty TTCaseDescResultDir }
        { UseProperty TTPrepareActions }
        { UseProperty TTPrepareStates }
        { UseProperty TTPrepareIndices }
        { UseProperty TTMsgLevel }
        { Properties
            { Footer
                { Name "Footer1" }
                { LeftFooter "Choose Operation and Properties" }
            }
            { Activation 
                { Target "Footer1" }
                { OnInit Active }
            }
            { Footer
                { Name "Footer2" }
                { RightFooter "Custom Script Generator" }
            }
            { Activation 
                { Target "Footer2" }
                { OnInit Active }
            }
                
            { Group
                { Name "options2" }
                { Type Vertical }
                { Align Labels }
                { Align Bottom }
                { Members ( tcasedescfile tcasedescdir tprepareactions tpreparestates tprepareindices tmsglevel) }
            }
            { Group
                { Name "midcolumn" }
                { Type Vertical }
                { Members ( options2 ) }
            }
            { Group
                { Name "All" }
                { Type Horizontal }
                { Members ( midcolumn) }
            }
        }
    }
}

IncludeIfExists "val/rules/uml/wrintegration.rules"