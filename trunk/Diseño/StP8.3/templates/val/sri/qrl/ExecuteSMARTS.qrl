
external string UseCases;

#include "qrl/tsdl_extract.inc"
#include "qrl/basic_textract_dt.inc"
#include "qrl/include/error.inc"

#include "val/qrl/include/TConfig.inc"
#include "val/qrl/include/TUseCase.inc"
#include "val/qrl/include/CreateDir.inc"




void 
main ()
{

  string scriptsdir =  current_projdir() + current_system() + "/testscpt_files/";

  string OUTPUTPATH = scriptsdir + "sri/";
  string path;

  list UseCaseList;
  int count, i;
  string use_case_name, test_unit_id;
  string command;
  string fname;

  UseCaseList = string_to_list (UseCases, " ");

  count = list_count (UseCaseList);

  if (count > 1)
    {
      message ("Select one Use Case only");
      return;
    }

  use_case_name = list_get(UseCaseList,0);


  if (!CheckExistance (use_case_name) )
    {
      message ("Use Case: " + use_case_name + " is not in the selected model");
      return;
    }

  test_unit_id = Get_T_test_unit_id(use_case_name, "");

  MakeDir(scriptsdir);

  MakeDir(OUTPUTPATH);

  MakeDir (OUTPUTPATH + test_unit_id);

return;
  // <MAL> command = "sh -c \"cd " + OUTPUTPATH + test_unit_id + " ; Xsmarts -r " + test_unit_id + ".rc \"" ;
  command = "cd " + OUTPUTPATH + test_unit_id;
  system( command );
  command = "Xsmarts -r " + test_unit_id + ".rc " ;
  system( command );
}

