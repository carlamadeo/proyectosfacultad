//      StP/UML
//      Confidential property of Aonix
//      Copyright (c) 2000
//      All rights reserved
//

// SPR 4052 - Model Management
Menu Tools
{
    { SubMenu
	{ Name ModelManagementMenu }
	{ Label "&Model Management" }
	{ PlaceAfter BaselineSubMenu }
    }
}

Menu ModelManagementMenu
{
// ECR 6149
    { Pin True }
    { Label "Model Management" }
// ECR 6149 end
// FixME: this is deprecated by the assignment commands in the ModelManagement Tree
// all the code behind that still needs to be removed !
//    { MenuEntry
//        { Name AssignFilesCommand }
//        { Label "&Assign Subsystem Files..." }
//        { ActiveFunc stp_repos_is_open }
//        { Builtin "EditorQrlEval stp_run_command(\"UmlSubsystem\",\"AssignFiles\");" }
//    }
    { MenuEntry
        { Name CheckSubsystemsCommand }
        { Label "Check Semantics for Subsystems..." }
        { ActiveFunc stp_repos_is_open }
        { Builtin "EditorQrlEval stp_run_command(\"UmlSubsystem\",\"CheckSubsystem\");" }
    }
    { MenuEntry
        { Name CreateSubsystemBaselineCommand }
        { Label "&Baseline Subsystem..." }
        { ActiveFunc stp_repos_is_open }
        { Builtin "EditorQrlEval stp_run_command(\"UmlSubsystem\",\"CreateSubsystemBaseline\");" }     
    }
    // ECR 4969 start
    { MenuEntry
        { Name LockSubsystemCommand }
        { Label "Lock Subsystem..." }
        { ActiveFunc stp_repos_is_open }
        { Builtin "EditorQrlEval stp_run_command(\"UmlSubsystem\",\"LockSubsystem\");" }
    }
    { MenuEntry
        { Name UnlockSubsystemCommand }
        { Label "Unlock Subsystem..." }
        { ActiveFunc stp_repos_is_open }
        { Builtin "EditorQrlEval stp_run_command(\"UmlSubsystem\",\"UnlockSubsystem\");" }
    }
    // ECR 4969 end
    { MenuEntry
        { Name RestoreSubsystemBaselineCommand }
        { Label "&Restore Subsystem..." }
        { ActiveFunc stp_repos_is_open }
        { Builtin "EditorQrlEval stp_run_command(\"UmlSubsystem\",\"RestoreSubsystemBaseline\");" }
    }
    { MenuEntry
        { Name ReconfigureExternalsCommand }
        // ECR 5327
        { Label "Reconfigure &External Model Elements..." }
        { ActiveFunc stp_repos_is_open }
        { Builtin "EditorQrlEval stp_run_command(\"UmlSubsystem\",\"ReconfigureExternals\");" }
    }
}

Class 0 UmlSubsystem
{
    { ClassCommand
	{ Name "LockSubsystem" }
	{ Label "Lock Subsystem..." }
	{ ShowPopsOnExec True }
	{ Properties
	    { List
		{ Name "basename" }
		{ Label "Subsystem name:" }
		{ Exclusive True }
		{ LabelAbove False }
		{ Rows 5 }
	    }
	    { Button
    		{ Name "OK" }
    		{ Label "OK" }
		{ Event
		    { Type Activation }
		    { Callback "LockSubsystemBaselineFunc" }
		}
		{ Event
		    { Type Select }
		    { Callback "LockSubsystemBaseline_cb" }
		}
	    }
	    { Button
		{ Name "Reset" }
		//{ Label "Reset" } //ECR 5027
        { Label "Refresh" } //ECR 5027
		{ Event
		    { Type Select }
		    { Callback "LockSubsystemBaselineFunc" }
		}
	    }
	}
    }
}

// ECR 4969
Class 0 UmlSubsystem
{
    { ClassCommand
	{ Name "UnlockSubsystem" }
	{ Label "Unlock Subsystem..." }
	{ ShowPopsOnExec True }
	{ Properties
	    { List
		{ Name "basename" }
		{ Label "Subsystem name:" }
		{ Exclusive True }
		{ LabelAbove False }
		{ Rows 5 }
	    }
	    { Button
    		{ Name "OK" }
    		{ Label "OK" }
		{ Event
		    { Type Activation }
		    { Callback "UnlockSubsystemBaselineFunc" }
		}
		{ Event
		    { Type Select }
		    { Callback "UnlockSubsystemBaseline_cb" }
		}
	    }
	    { Button
		{ Name "Reset" }
		//{ Label "Reset" } //ECR 5027
        { Label "Refresh" } //ECR 5027
		{ Event
		    { Type Select }
		    { Callback "UnlockSubsystemBaselineFunc" }
		}
	    }
	}
    }
}

Class 0 UmlSubsystem
{
    { ClassCommand
	{ Name "CheckSubsystem" }
	{ Label "Check Subsystem..." }
	{ ShowPopsOnExec True }
	{ Properties
	    { List
		{ Name "basename" }
		{ Label "Subsystem name:" }
		// ECR 5114
		{ Exclusive False }
		{ LabelAbove False }
		{ Rows 5 }
	    }
	    { Button
    		{ Name "OK" }
    		{ Label "OK" }
		{ Event
		    { Type Activation }
		    { Callback "CheckSubsystemBaselineFunc" }
		}
		{ Event
		    { Type Select }
		    { Callback "CheckSubsystemBaseline_cb" }
		}
	    }
	    { Button
		{ Name "Reset" }
		//{ Label "Reset" } //ECR 5027
        { Label "Refresh" } //ECR 5027
		{ Event
		    { Type Select }
		    { Callback "CheckSubsystemBaselineFunc" }
		}
	    }
	}
    }
}

Class 0 UmlSubsystem
{
    { ClassCommand
	{ Name "CreateSubsystemBaseline" }
	{ Label "Baseline Subsystem..." }
	{ ShowPopsOnExec True }
	{ Properties
	    { List
		{ Name "basename" }
		{ Label "Subsystem name:" }
		{ Exclusive True }
		{ LabelAbove False }
		{ Rows 5 }
	    }
	    { Text
    		{ Name "basedir" }
    		{ Label "Save directory:" }
    		{ MinLength 1 }
    		{ MaxLength 256 }
    		{ InitVal "${projdir}" }
	    }
            // ECR 3651
            { Button
                { Name "browse_for_basedir" }
                { Label "Choose" }
                { Event
                    { Type Select }
                    { Callback "select_subsystem_baseline_basedir_callback" }
                }
            }
            { Group
                { Name "folder_group" }
                { Label "" }
                { Type Horizontal }
                { Resizable ResizeAny }
                { ChildSizePolicy ResizeWidth }
                { LayoutPolicy ResizeAny }
                { VerticalAlign AlignLabels }
                { Members ( basedir browse_for_basedir ) }
            }
            // ECR 3651
	    { Choice
    		{ Name "overwrite_file" }
    		{ Type CheckBox }
    		{ ChoiceItem
    		    { Label "Overwrite existing baseline file." }
    		    { Init Off }
    		}
	    }
	    { Choice
    		{ Name "create_dir" }
    		{ Type CheckBox }
    		{ ChoiceItem
    		    { Label "Create directory if it doesn't exist." }
    		    { Init On }
    		}
	    }
	    { Choice
    		{ Name "ignore_lock" }
    		{ Type CheckBox }
    		{ ChoiceItem
    		    { Label "Ignore locks." }
    		    { Init Off }
    		}
	    }
	    // ECR 4969
            { Choice
                { Name "lock_after" }
                { Type CheckBox }
                { ChoiceItem
                    { Label "Lock subsystem after baselining." }
                    { Init Off }
                }
            }
	    { Group 
	        { Name "choice_group" }
                { Type Vertical }
                { Resizable ResizeAny }
                { ChildSizePolicy ResizeWidth }
                { LayoutPolicy ResizeAny }
                { HorizontalAlign AlignLabels }
            }	        
            { TopGroup
                { Align Left }
                { Members ( basename folder_group choice_group ) }
            }
	    { Button
    		{ Name "OK" }
    		{ Label "OK" }
		{ Event
		    { Type Activation }
		    { Callback "CreateSubsystemBaselineFunc" }
		}
		{ Event
		    { Type Select }
		    { Callback "CreateSubsystemBaseline_cb" }
		}
	    }
	    { Button
		{ Name "Reset" }
		//{ Label "Reset" } //ECR 5027
        { Label "Refresh" } //ECR 5027
		{ Event
		    { Type Select }
		    { Callback "CreateSubsystemBaselineFunc" }
		}
	    }
	}
    }
}

Class 0 UmlSubsystem
{
    { ClassCommand
	{ Name "RestoreSubsystemBaseline" }
        { Label "Restore Subsystem..." }
	{ ShowPopsOnExec True }
	{ Properties
	    { Text
    		{ Name "basename" }
    		{ Label "Baseline file" }
    		{ LabelAbove True }
    		{ MinLength 1 }
                { DispLength 60 }
    		{ MaxLength 256 }
	    }
            // ECR 3651
            { Button
                { Name "browse_for_basedir" }
                { Label "Choose" }
                { Event
                    { Type Select }
                    { Callback "select_subsystem_baseline_file_callback" }
                }
            }
            { Group
                { Name "folder_group" }
                { Label "" }
                { Type Horizontal }
                { Resizable ResizeAny }
                { ChildSizePolicy ResizeWidth }
                { LayoutPolicy ResizeAny }
                { Align Bottom }
                { Members ( basename browse_for_basedir ) }
            }
            // ECR 3651
            { TopGroup
                { Align Left }
                { Members ( folder_group ) }
            }
	    { Button
    		{ Name "OK" }
    		{ Label "OK" }
		{ Event
		    { Type Activation }
		    { Callback "RestoreSubsystemBaselineFunc" }
		}
		{ Event
		    { Type Select }
		    { Callback "RestoreSubsystemBaseline_cb" }
		}
	    }
	}
    }
}

Class 0 UmlSubsystem
{
    { ClassCommand
        { Name "AssignFiles" }
        { Label "Model Management" }
	{ ShowPopsOnExec True }
	{ Properties
	    { List
		{ Name "SubSysListLeft" }
		{ Label "Subsystem:" }
		{ Rows 4 }
		{ Width 40 }
		{ Exclusive False }
		{ LabelAbove True }
		{ Event
		    { Type Select}
		    { Callback "SubSysListLeft_cb" }
		}
	    }
	    { List
		{ Name "FilesInSubSysListLeft" }
		{ Label "Files in subsystem:" }
		{ Rows 8 }
		{ Width 40 }
		{ Exclusive False }
		{ LabelAbove True }
		{ Event
		    { Type EventDoubleClickRow}
		    { Callback "MoveSubFilesToRight_cb" }
		}
	    }
	    { List
		{ Name "SubSysListRight" }
		{ Label "Subsystem:" }
		{ Rows 4 }
		{ Width 40 }
		{ Exclusive False }
		{ LabelAbove True }
		{ Event
		    { Type Select}
		    { Callback "SubSysListRight_cb" }
		}
	    }
	    { List
		{ Name "FilesInSubSysListRight" }
		{ Label "Files in subsystem:" }
		{ Rows 8 }
		{ Width 40 }
		{ Exclusive False }
		{ LabelAbove True }
		{ Event
		    { Type EventDoubleClickRow}
		    { Callback "MoveSubFilesToLeft_cb" }
		}
	    }
	    { Button
		{ Name "MoveSubFilesToRight" }
		{ Label "->" }
		{ Event
		    { Type Select }
		    { Callback "MoveSubFilesToRight_cb" }
		}
	    }
	    { Button
		{ Name "MoveSubFilesToLeft" }
		{ Label "<-" }
		{ Event
		    { Type Select }
		    { Callback "MoveSubFilesToLeft_cb" }
		}
	    }
	    { Group
		{ Name "AddRemoveGroup" }
		{ Type Vertical }
		{ VerticalAlign AlignCenter }
		{ VerticalSpacing 5 }
		{ Members ( MoveSubFilesToRight MoveSubFilesToLeft ) }
	    }
	    { Group
		{ Name "TopGroup" }
		{ Type Horizontal }
		{ HorizontalAlign AlignCenter }
		{ HorizontalSpacing 30 }
		{ Members ( SubSysListLeft SubSysListRight ) }
	    }
	    { Group
		{ Name "BottomGroup" }
		{ Type Horizontal }
		{ VerticalAlign AlignCenter }
		{ HorizontalSpacing 5 }
		{ Members ( FilesInSubSysListLeft AddRemoveGroup FilesInSubSysListRight ) }
	    }
	    { Group
		{ Name "SelectionGroup" }
		{ Type Vertical }
		{ Align AlignLeft }
		{ HorizontalSpacing 10 }
		{ VerticalAlign AlignCenter }
		{ Members ( TopGroup BottomGroup ) }
	    }
	    { Button
		{ Name "OK" }
		{ Label "OK" }
		{ Event
		    { Type Activation }
		    { Callback "ShowMMDialog" }
		}
		{ Event
		    { Type Select }
		    { Callback "MMOK_cb" }
		}
	    }
	    { Button
		{ Name "Reset" }
		//{ Label "Reset" } //ECR 5027
        { Label "Refresh" } //ECR 5027
		{ Event
		    { Type Select }
		    { Callback "ShowMMDialog" }
		}
	    }
	}
    }
}

// ECR 5327 start
Class 0 UmlSubsystem
{
    { ClassCommand
	{ Name "ReconfigureExternals" }
        { Label "Reconfigure Externals from Baseline(s)..." }
//	{ Type Nowin }
//	{ QrlEvaluate "ReconfigureExternalsFunc();" }
//    }
	{ ShowPopsOnExec True }
	{ Properties
	    { Text
    		{ Name "basedir" }
    		{ Label "Baseline directory:" }
    		{ LabelAbove True }
    		{ MinLength 1 }
                { DispLength 60 }
    		{ MaxLength 256 }
    		{ InitVal "${projdir}" }
	    }
            // ECR 3651
            { Button
                { Name "browse_for_basedir" }
                { Label "Choose" }
                { Event
                    { Type Select }
                    { Callback "select_subsystem_baseline_basedir_callback" }
                }
            }
            { Group
                { Name "folder_group" }
                { Label "" }
                { Type Horizontal }
                { Resizable ResizeAny }
                { ChildSizePolicy ResizeWidth }
                { LayoutPolicy ResizeAny }
                { Align Bottom }
                { Members ( basedir browse_for_basedir ) }
            }
	    { Button
    		{ Name "OK" }
    		{ Label "OK" }
		{ Event
		    { Type Activation }
		    { Callback "RestoreExternalsFunc" }
		}
		{ Event
		    { Type Select }
		    { Callback "RestoreExternals_cb" }
		}
	    }
	}
    }
}
// ECR 5327 end
