//
//      sccsid[] = %W% %Y% %D%
//      StP/UML
//      Confidential property of Aonix
//      Copyright (c) 1997
//      All rights reserved
//

// This file contains the graphical representations of the symbols
// used in the uclassd editor, including their replacesets

// for note and vertex
Include "rules/note_vertex_syms.rules.common"

// for objects
Include "rules/object_sym.rules.common"

TypeSet PreserveScaleSet
{
	Class
	Package
	ParameterizedClass
}

NodeSymbol PreserveScaleSet
{
	{ PreserveScale PreserveScaleSet }
}

NodeSymbol Class
{
    { PrintName "Class" }
    { Shape
        { Predefined Rectangle }
        { ToolbarImage "class" }
    }
    { LabelAnchor North }
    { CanAdjustLabel False }
    { DeleteDependents True }
    { AutoScaleSmaller True }
    { AutoScaleLarger True }
    { CanApplyScaleCmd True }
	{ DefaultSize 2.3 0.9 }
    { ReplaceSet ( ClassName ParameterizedClass ) }
}

// ECR2653
NodeSymbol Ellipsis
{
    { PrintName "Ellipsis" }
    { Shape
        { Draw
		// the white background
		{ Rectangle
		  	{ Origin 0.0 0.0 }
			{ Size   40.0 40.0 } 
			{ FillStyle White }
			{ LineStyle None }
		}

		// the left dot
		{ Rectangle
		  	{ Origin -10.0 2.0 }
			{ Size   5.0 5.0 } 
		}

		// the middle dot
		{ Rectangle
		  	{ Origin 0.0 2.0 }
			{ Size   5.0 5.0 }
		}

		// the right dot
		{ Rectangle
		  	{ Origin 10.0 2.0 }
			{ Size   5.0 5.0 }
		}
	  }

        { ToolbarImage "ellipsis" }
    }
    { DeleteDependents True }
    { CanApplyScaleCmd False }
    { CanHaveLabel False }
    { DefaultSize 0.5 0.5 }
    { Cardinality
	{ Min 1 }
	{ Max 1 }
	{ OutLinks Generalization }
    }
}
// ECR2653

Include "rules/package_sym.rules.common"

// add to the shared definition
NodeSymbol Package
{
    { CanApplyScaleCmd True }

    { DefaultSize 2.1 1.4 }
    { ReplaceSet ( PackageName ) }
    { AutoScaleLarger True }
}

NodeSymbol Attribute
{
    { PrintName "Attribute" }
    { Shape
        { Predefined BachLabel }
        { ToolbarImage "attribute" }
    }
}

NodeSymbol Operation
{
	{ PrintName "Operation" }
	{ Shape
            { Predefined BachLabel }
            { ToolbarImage "operation" }
        }
	{ ReplaceSet ( Attribute ) }
}


// this is the symbol that a class category turns into
// when the user drops a class category symbol on a class category
// (this simply gets mapped as a Category)
// This adds to the shared definition
NodeSymbol PackageName
{
    { PrintName "Package" }
	{ CanApplyScaleCmd False }
    { ReplaceSet ( Package ) }
    { AutoScaleLarger True }
}

// this is the symbol that a class turns into
// when the user drops a class symbol on a class category
NodeSymbol ClassName
{
    { PrintName "Class" }
    { Shape { Predefined Rectangle } }
    { ReplaceSet ( Class ) }
}

NodeSymbol ParameterizedClass
{
    { PrintName "Parameterized Class" }
    { AutoScaleLarger True }
// ECR 6562 begin
    { AutoScaleSmaller True }
// ECR 6562 end
	{ Shape 
        { Predefined MultiBoxWithDashedBox }
        { ToolbarImage "parameterized_class" }
//        { Draw
//            { Rectangle
//                { Origin 0.0 0.0 }
//                { Size 40.0 30.0 }
//            }
//            { Rectangle
//                { Origin 20.0 -10.0 }
//                { Size 20.0 15.0 }
//                { FillStyle White }
//                { LineStyle Dashed }
//            }
//        }
    }

	//ECR4876
    { DefaultSize 2.3 1.1 }

    { Components
		{ Space 1 }
		{ Adjust Left }
		{ XOffset 4 }
		{ YOffset 6 }
		{ ScaleWidth Fit }
		{ ScaleHeight Fit }	
		{ Types ( ClassContainsToTypeset ) }
		{ ScaleDmarks True }
    }
    { ReplaceSet ( Class ) }
    { PreserveScale Class }
}

NodeSymbol InstantiatedClass
{
	// JED - TODO: add display mark for parameters to the right of the label
    { PrintName "Instantiated Class" }
    { AutoScaleLarger True }
    { Shape
        { Predefined Rectangle }
        { ToolbarImage "instantiated_class" }
    }
    { DefaultSize 2.3 0.9 }
    { ReplaceSet ( None ) }
}

NodeSymbol Interface
{
    { PrintName "Interface" }
    { Shape
        { ToolbarImage "interface" }
	{ Draw
		{ Ellipse
			{ Origin 0.0 0.0 }
			{ Size   10.0 10.0 }
		}
	}
    }
    { CanAdjustLabel False }
    { DeleteDependents True }
    { AutoScaleSmaller False }
    { AutoScaleLarger False }
    { CanApplyScaleCmd False }
    { HAdjust Center }
    { VAdjust Bottom }
    { DefaultSize 1.8 1.8 }
    { ReplaceSet ( none ) }
}

NodeSymbol Comment
{
    { Shape
        { Predefined Comment }
    }
    { PrintName "Comment" }
    { AutoScaleLarger True }
    { AutoScaleSmaller True }
    { ReplaceSet ( None ) }
}

// the next section specifies the containment properties of the
// NodeSymbols. 

NodeSymbol ClassContainsFromTypeset
{
    { LabelAnchor North }
    { CanAdjustLabel False }
    { DeleteDependents True }
    { HAdjust Center }
    { VAdjust Top }
    // { AutoScaleSmaller True }
    { AutoScaleLarger True }
    { CanApplyScaleCmd True }
}

NodeSymbol ParameterizedClass
{
	{ LabelAnchor NorthWest }
    { CanAdjustLabel False }
    { DeleteDependents True }
    { HAdjust Left }
    { VAdjust Top }
}

NodeSymbol Class
{
    { Components
		{ Space 1 }
		{ Adjust Left }
		{ XOffset 4 }
		{ YOffset 6 }
		{ ScaleWidth Fit }
		{ ScaleHeight Fit }	
		{ Types ( ClassContainsToTypeset ) }
		{ ScaleDmarks True }
    }
    { ReplaceSet ( ParameterizedClass ) }
    { PreserveScale ParameterizedClass }
}


NodeSymbol ClassContainsToTypeset
{
	// force each of these to have 1 link to its container (i.e. to
	// have a container
	{ Cardinality 
		{ Min 1 }
		{ Max 1 }
		{ InLinks Contains }
	}
    { AutoScaleLarger True }
    { AutoScaleSmaller True }
    { DefaultSize 1.5 0.40 }
    { CenterIncludes True }
    { LabelAnchor West }
    { SizeIsLabelBox True }
    { CanApplyScaleCmd False }
    { Align False }
    { ShowTypeLabel True }
}


// this is the diamond hub that is part of an Nary association
NodeSymbol NaryAssociationHub
{
    { PrintName "AssociationHub" }
    { Shape { Predefined Diamond } }
	{ DefaultSize 0.7 0.7 }
	{ CanHaveLabel True }
	{ CanApplyScaleCmd False }
	{ Cardinality
		{ Min 0 }
		{ OutLinks NaryAssociationRole }
	}
	{ Cardinality
		{ Min 0 }
		{ Max 1 }
		{ OutLinks AssociationClassLink }
	}
	// JED - TODO: convert to QRL { NeedsLink True }
}



CntxSymbol AssociationAnchor
{
    { ReadOnly True }
    { PrintName "Constraint Anchor" }
    { Shape { Predefined FilledEllipse } }
    { ParentLink Association }
    // ECR 3856 begin
    { ParentLink Aggregation }
    // ECR 3856 end
    { ParentLink NavigableAssociation } // ECR 7480
    { UniformScale True }
    { CanApplyScaleCmd False }
    { DefaultSize 0.1 0.1 }
    { SnapToLink True }
    { NeedsLink True }
    { PickBeforeArcs True }
    { ReplaceSet ( None ) }
    { ReparentOnMove True }
}


CntxSymbol GeneralizationConstraintAnchor
{
    { ReadOnly True }
    { PrintName "Parallel Generalization Anchor" }
    { Shape { Predefined FilledEllipse } }
    { UniformScale True }
    { CanApplyScaleCmd False }
    { DefaultSize 0.1 0.1 }
    { SnapToLink True }
    { NeedsLink True }
    { PickBeforeArcs True }
    { ReplaceSet ( None ) }
    { ReparentOnMove True }
}

// ECR947, ECR 4494
// Moved CommentAnchor to note_vertex_syms.rules.common
CntxSymbol CommentAnchor
{
    { ParentLink AllLinkSymbols }
}
// End ECR947, ECR 4494

CntxSymbol LabelTypes
{
	{ PrintName "Role" }
	{ ReadOnly True }
	{ Shape { Predefined BachLabel }}
	{ CanBeSelected True }
	{ CanHaveLabel True }
	{ CanAdjustLabel False }
	{ Align False }
	{ AutoScaleLarger True }
	{ AutoScaleSmaller True }
	{ CanApplyScaleCmd False }
	{ ReplaceSet ( None ) }
	{ ParentLink BachLabelLinks }
	{ SymbolicDependentsFunc uclassd_cntx_role_depends_func }
}

CntxSymbol RelLabelFrom
{
	{ Anchor FromEnd } // ECR 4823
	{ ApplicationTag "Bachman From Label" }
}
CntxSymbol RelLabelTo
{
	{ Anchor ToEnd } // ECR 4823
	{ ApplicationTag "Bachman To Label" }
}

