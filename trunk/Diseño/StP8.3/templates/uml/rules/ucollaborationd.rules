//      StP/UML
//      Confidential property of Aonix
//      Copyright (c) 1997
//      All rights reserved

Include "rules/uml.feature"

DiagramType
{
        { SyntaxCheckFunc ucollaborationd_CheckSyntax }
}

NodeSymbol 10 Actor	// shared definition
{}
Include "rules/actor_sym.rules.common"
Include "rules/ucollaborationd.prop"

NodeSymbol Actor
{
    { Shape
        { Predefined Rectangle }
        { ToolbarImage "actor_collaboration" }
    }
    { LabelAnchor Center }
    { DefaultSize 1.5 1.0 }
    { DisplayMark
	{ Name UnderlineEffect }
	{ LabelMark Underscore }
	{ Help "Underline Actor label" }
    }
    // Begin Add ECR4221
    // Show a small Actor Symbol 
    { DisplayMark
    	{ Name MiniActor }
    	{ Anchor UpperRight }
    	{ BitmapMark0 "actor0" }
    	{ BitmapMark1 "actor1" }
    	{ BitmapMark2 "actor2" }
    	{ HAdjust Right }
    	{ VAdjust Bottom }
    	{ XPixelOffset	0 }
    	{ YPixelOffset	-5 }
    }
    // End Add ECR4221
    { DisplayMark
	{ Name ActorStereotype }
        //{ StringMark "«Actor»" }
        //{ CondFunc "AlwaysTrue();" }
	{ ItemCond (UmlStereotype) }
	// Changed to False for ECR4221
	{ CallUncond False }
	{ StringMarkFunc "uml_label_mark_func_get_default(gde_dmark_matched_items,\"Actor\");" }
	{ Anchor UpperCenter }
	{ HAdjust Center }
	{ VAdjust Bottom }
	{ Help "Constant <<Actor>> String" }
    }
    { HAdjust Center }
    { VAdjust Center }
    //{ CanAdjustLabel False }
    //{ ShowTypeLabel False }
//     { NameCompletion
//         { NameCompletionFunc actor_name_completion_func }
//     }
    { Components
	{ ScaleWidth Larger }
	{ LineAbove True }
    }
}

NodeSymbol 15 Collaboration
{
    { ReadOnly False }
    { PrintName "Collaboration" }
    { Shape
        { Predefined DashedEllipse }
        { ToolbarImage "collaboration" }
    }
    { DefaultSize 2.2 0.7 }
    { NodeMapping
	{ AppType UmlCollaboration }
	{ NameIsRequired True }
	{ MappingName CollaborationMapping }
	{ NameFunc uml_gde_node_name_func }
    }
    { CanAdjustLabel True }
    { AutoScaleSmaller False }
    { AutoScaleLarger True }
    { CanApplyScaleCmd True }
}


NodeSymbol 20 ActiveCompositeObject {}
NodeSymbol 22 PassiveCompositeObject {}
TypeSet CompositeObject
{
    PassiveCompositeObject
    ActiveCompositeObject
}
	
NodeSymbol CompositeObject
{
    { PrintName "Composite Object" }
    { Shape
        { Predefined Rectangle }
        { ToolbarImage "composite_object" }
    }
    { LabelAnchor North }
    //{ CanAdjustLabel True }
    { DefaultSize 2.5 2.0 }
    { DisplayMark
	{ Name UnderlineEffect }
        { LabelMark Underscore }
	//{ XPixelOffset 5 }
        { YPixelOffset 6 }
        { Help "Underline Object label" }
    }
    //{ RenameFunc oo_class_rename }
     { NodeMapping
 	{ MappingName ObjectScope }
 	{ AppType UmlObjectClassScope }
 	{ NameFunc uml_instance_owner_name }
 	{ NameIsRequired True }
 	{ InverseMapFunc object_instance_label }
     }
    { NodeMapping
	{ MappingName ObjectMapping }
	{ AppType UmlObjectInstance }
	{ NameFunc uml_qualified_object_name }
	{ NameIsRequired True }
 	{ Scope
 	    { Symbol Self }
 	    { MappingName ObjectScope }
 	}
	{ InverseMapFunc object_instance_label } //uml_object_inverse_node_map_func
    }
    { NameCompletion
        { MappingName ObjectMapping } // ObjectScope
        { NameCompletionFunc object_name_completion_func }
    }
    { Components
		{ Space 2 }
    //{ Adjust Center }
		{ XOffset 20 }
		{ YOffset 7 }
		{ ScaleWidth Larger }
		{ ScaleHeight Larger }
		//{ Type Object }
		{ LineAbove True }
		{ LineBelow False }
		{ ScaleDmarks True }
    }
    { Navigation
        { Name RequirementTableFromNode }
        { UseMappings ( ObjectMapping) }
    }
    { Navigation
        // ECR 5118 begin
        { ParseCondition "use_doors_integration();" }
        // ECR 5118 end
        { Name DOORS }
        { UseMappings ( ObjectMapping ) }
    }
}

NodeSymbol ActiveCompositeObject
{
    { PrintName "Active Composite Object" }
    //{ Shape { Predefined DoubleRectangle } }
    { ReplaceSet ( PassiveCompositeObject ) }
    { PreserveScale PassiveCompositeObject }
}
NodeSymbol PassiveCompositeObject
{
    { ReplaceSet ( ActiveCompositeObject ) }
    { PreserveScale ActiveCompositeObject }
}

NodeSymbol 25 Note // shared definition - see also vertex
{}

// ECR947, ECR 4494
// Added CommentAnchor
CntxSymbol CommentAnchor
{
    { ParentLink AllLinkSymbols }
}
// End ECR947, ECR 4494


NodeSymbol 30 Package // Package symbol is shared
{}
NodeSymbol 31 PackageName
{
    //{ Cardinality { Min 1 } { Max 1 } { InLinks PackageComponentLink } }
    { Cardinality { Min 1 } { Max 1 } { InLinks Contains } }
}
Include "rules/package_sym.rules.common"
// add to the shared definition
NodeSymbol Package
{
    { AutoScaleSmaller False }
    { AutoScaleLarger True }
    { CanApplyScaleCmd True }

    { DefaultSize 2.1 1.4 }
    { ReplaceSet ( Package PackageName ) }
}


NodeSymbol 40 ActiveObject {}
NodeSymbol 42 PassiveObject {}
NodeSymbol 44 MultiObject {}
TypeSet Object
{
    ActiveObject
    PassiveObject
    MultiObject
}
    
NodeSymbol 45 InstanceAttribute
{
}
Include "rules/object_sym.rules.common"

NodeSymbol ActiveObject
{
    { PrintName "Active Object" }
    //{ Shape { Predefined DoubleRectangle } }
    { ReplaceSet ( PassiveObject ) }
    { PreserveScale PassiveObject }
}
NodeSymbol PassiveObject
{
    { ReplaceSet ( ActiveObject ) }
    { PreserveScale ActiveObject }
}
NodeSymbol MultiObject
{
    { Shape
        { ToolbarImage "multi_object" }
        { Draw
            { Rectangle
                { Size 50.0 50.0 }
                { Origin 10.0 -10.0 }
                { LineStyle Solid }
                { FillStyle None }
            }
            { Rectangle
                { Size 50.0 50.0 }
                { Origin 0.0 0.0 }
                { LineStyle Solid }
                { FillStyle White }
            }
        }
    }
    { LabelAnchor Center }
    { NoCommittedTrans True }
    { Components
        { Types ( None ) }
    }
    { PrintName "MultiObject" }
}
            

TypeSet ActiveSet
{
    ActiveObject
    ActiveCompositeObject
}

NodeSymbol ActiveSet
{
    // { Shape { Predefined DoubleRectangle } }
    { Shape
        { Draw
            { Rectangle
                { Origin 0.0 0.0 }
                { Size 50.0 50.0 }
                { LineStyle Thick }
                { FillStyle None }
            }
        }
    }

    { LabelAnchor North }
    { NodeMapping
	{ MappingName ActiveObjectMapping }
        { AppType UmlActiveObject }
	{ NameFunc uml_qualified_object_name } 
	{ NameIsRequired True }
 	{ Scope
 	    { Symbol Self }
	    { MappingName ObjectScope }
 	}
	{ InverseMapFunc object_instance_label } //uml_object_inverse_node_map_func
    }
}


NodeSymbol 50 ScenarioInstance
{
    { PrintName "Scenario Instance" }
}
NodeSymbol 55 CollaborationContext
{
    { PrintName "Collaboration Context" }
}
TypeSet ScenarioInstanceSet
{
    ScenarioInstance
    CollaborationContext
}
Include "rules/scenario_sym.rules.common"


NodeSymbol 60 ExtensionPoint
{}
Include "rules/extension_sym.rules.common"

TypeSet AllLinkSymbols
{ 
    CollaborationRole
    RequirementToLinkLinkSymbols
    Contains
    ObjectLink
    TypeElementLink
    CollaborationRole
    StereotypeableLinkSet 
    NoteLink // ECR 4496
}


NodeSymbol 70 Vertex // shared symbol
{
   { ReplaceSet ( None ) }
   { Cardinality { Min 1 } { Max 1 } { InLinks AllLinkSymbols } }
   { Cardinality { Min 1 } { Max 1 } { OutLinks AllLinkSymbols } }
}

Include "rules/note_vertex_syms.rules.common"

TypeSet AllNoteableNodeTypes
{
    Actor
    Package
    Object
    Collaboration
    ActiveCompositeObject
    CompositeObject
    ExtensionPoint
    TypeElement
    Vertex
    InstanceAttribute
// ECR947, ECR 4494
    CommentAnchor
    MessageSymbols
// End ECR947, ECR 4494
}


NodeSymbol 80 TypeElement
{
    { PrintName "Type" }
    { Shape
        { Predefined Rectangle }
        { ToolbarImage "type" }
    }
    { LabelAnchor North }
    { DefaultSize 2.5 2.0 }
    { DisplayMark
	{ Name TypeStereotype }
        //{ StringMark "«Type»" }
        //{ CondFunc "AlwaysTrue();" }
	{ ItemCond (UmlStereotype) }
	{ CallUncond True }
	{ StringMarkFunc "uml_label_mark_func_get_default(gde_dmark_matched_items,\"Type\");" }
	{ Anchor UpperCenter }
	{ HAdjust Center }
	{ VAdjust Bottom } // Top
	{ Help "Constant <<Type>> String" }
    }
    { HAdjust Center }
    { VAdjust Top }
    //{ CanAdjustLabel False }
    //{ ShowTypeLabel False }
//     { NameCompletion
//         { NameCompletionFunc actor_name_completion_func }
//     }
    { NodeMapping
	{ AppType UmlType }
	{ NameIsRequired True }
	{ MappingName ObjectMapping }
	{ NameFunc uml_gde_node_name_func }
    }
    { NodeMapping
	{ AppType UmlClass }
	{ NameIsRequired True }
	{ MappingName ClassMapping }
	{ NameFunc uml_gde_node_name_func }
    }
    { EditAnnotation
        { UseMappings ( ClassMapping ) }
    }
    { Components
	{ ScaleWidth Larger }
	{ LineAbove True }
    }
   { Navigation
     { Name RequirementTableFromNode }
     { UseMappings ( ClassMapping) }
   }
    { Navigation
        // ECR 5118 begin
        { ParseCondition "use_doors_integration();" }
        // ECR 5118 end
        { Name DOORS }
        { UseMappings ( ClassMapping ) }
    }
}


TypeSet	ObjectSet
{
    Object
    CompositeObject
	//CompositeObject1
}

// SPR 4052 - Model Management
// used for Model Management to have one common display mark
TypeSet AllLockableNodeTypes
{
    Actor
    Package
    Object
    Collaboration
    ActiveCompositeObject
    CompositeObject
    ExtensionPoint
    TypeElement
    ScenarioInstanceSet
}

// Containment

LinkSymbol 100 Contains
{
    { Connects { From Package } { To Package } }
    { Connects { From Package } { To ObjectSet } }
    { Connects { From CompositeObject } { To Object } }
    { Connects { From TypeElement } { To Object } }
    { Connects { From TypeElement } { To Note } }
    { LinkMapping
	{ MappingName ComponentMapping }
	{ AppType UmlContains }
	{ FromNode
	    { Symbol FromNode }
	    { MappingName ObjectMapping } }
	{ ToNode
	    { Symbol ToNode }
	    { MappingName ObjectMapping } } }
    { Uncentered True }
    { CanBeVisible False }
    { CanBeInclude True }
}

LinkSymbol 120 ObjectLink
{
    { PrintName "Object Link" }
    { Uncentered True }
    { Connects { From Actor } { To ObjectSet } }
    { Connects { From ObjectSet } { To Actor } }
    { Connects { From ObjectSet } { To ObjectSet } }
    { LinkMapping
	{ MappingName ForwardMapping }
    //{ PreconditionFunc booch_object_link_maps_forward }
	{ AppType UmlObjectLink }
	//{ NameFunc booch_always_null }
	{ FromNode
	    { Symbol FromNode }
	    { MappingName ObjectMapping }
	}
	{ ToNode
	    { Symbol ToNode }
	    { MappingName ObjectMapping }
	}
	{ InverseMapFunc gde_no_op_inverse_link_map_func }
    }
}

LinkSymbol 130 TypeElementLink
{
    { PrintName "Type Link" }
    { Connects { From TypeElement } { To Object } }
    { Connects { From Object } { To TypeElement } }
    { Uncentered True }
    //{ ToOpenArrow True } // ECR 4861
    //{ Dashed True }
}


LinkSymbol 140 CollaborationRole
{
    { PrintName "Collaboration Link" }
    { CanHaveLabel True }
    { Connects { From Collaboration } { To Object } }
    { LinkMapping
	{ MappingName CollaborationMapping }
	{ AppType UmlCollaborationRole }
	{ FromNode
	    { Symbol FromNode }
	    { MappingName CollaborationMapping } }
	{ ToNode
	    { Symbol ToNode }
	    { MappingName ObjectMapping } } }
    { Uncentered True }
    { ToOpenArrow True } // ECR 4861
    { Dashed True }
}

CntxSymbol 210 SimpleMessage
{
    { PrintName "Simple Message" }
    { Shape
        { Predefined ArrowParam }
        { ToolbarImage "simple_message" }
    }
    { CanHaveLabel True }
    { OrientWithArc True }
    { ParentLink ObjectLink }
    { LinkMapping
	{ MappingName MessageInstanceMapping }
        { InverseMapFunc uml_message_inverse_mapping }
	{ AppType UmlSimpleMessage }
	{ NameFunc	uml_gde_link_name_func }
	//{ SigFunc	booch_message_sig }
	{ FromNode
	    { SymbolFunc uml_message_from_end }
	    { MappingName ObjectMapping }
	}
	{ ToNode
	    { SymbolFunc uml_message_to_end }
	    { MappingName ObjectMapping }
	}
// 	{ Scope
// 	      //{ MappingName ObjectDiagScopeMapping }
// 	    { SymbolFunc uml_instance_owner_scope }
// 	}
	{ NameIsRequired True }
    }
}

CntxSymbol 211 RevSimpleMessage
{
    { PrintName "Simple Message" }
    { Shape { Predefined RevArrowParam } }
    { CanHaveLabel True }
    { OrientWithArc True }
    { ParentLink ObjectLink }
    { LinkMapping
	{ MappingName MessageInstanceMapping }
	{ InverseMapFunc uml_message_inverse_mapping }
	{ AppType UmlSimpleMessage }
	{ NameFunc	uml_gde_link_name_func }
	//{ SigFunc	booch_message_sig }
	{ FromNode
	    { SymbolFunc uml_message_to_end }
	    { MappingName ObjectMapping }
	}
	{ ToNode
	    { SymbolFunc uml_message_from_end }
	    { MappingName ObjectMapping }
	}
// 	{ Scope
// 	      //{ MappingName ObjectDiagScopeMapping }
// 	    { SymbolFunc uml_instance_owner_scope }
// 	}
	{ NameIsRequired True }
    }
}

CntxSymbol 220 SynchronousMessage
{
    { PrintName "Synchronous Message" }
    { Shape
        { Predefined ArrowParamWithX }
        { ToolbarImage "synchronous_message" }
    }
    { OrientWithArc True }
    { ParentLink ObjectLink }
    { LinkMapping
	{ MappingName MessageInstanceMapping }
	{ InverseMapFunc uml_message_inverse_mapping }
	{ AppType UmlSynchronousMessage }
	{ NameFunc	uml_gde_link_name_func }
	{ FromNode
	    { SymbolFunc uml_message_from_end }
	    { MappingName ObjectMapping }
	}
	{ ToNode
	    { SymbolFunc uml_message_to_end }
	    { MappingName ObjectMapping }
	}
	{ NameIsRequired True }
    }
}

CntxSymbol 221 RevSynchronousMessage
{
    { PrintName "Synchronous Message" }
    { Shape { Predefined RevArrowParamWithX } }
    { OrientWithArc True }
    { ParentLink ObjectLink }
    { LinkMapping
	{ MappingName MessageInstanceMapping }
	{ InverseMapFunc uml_message_inverse_mapping }
	{ AppType UmlSynchronousMessage }
	{ NameFunc	uml_gde_link_name_func }
	{ FromNode
	    { SymbolFunc uml_message_to_end }
	    { MappingName ObjectMapping }
	}
	{ ToNode
	    { SymbolFunc uml_message_from_end }
	    { MappingName ObjectMapping }
	}
	{ NameIsRequired True }
    }
}

CntxSymbol 230 BalkingMessage
{
    { PrintName "Balking Message" }
    { Shape
        { Predefined ArrowParamWithArc }
        { ToolbarImage "balking_message" }
    }
    { OrientWithArc True }
    { ParentLink ObjectLink }
    { LinkMapping
	{ MappingName MessageInstanceMapping }
	{ InverseMapFunc uml_message_inverse_mapping }
	{ AppType UmlBalkingMessage }
	{ NameFunc	uml_gde_link_name_func }
	{ FromNode
	    { SymbolFunc uml_message_from_end }
	    { MappingName ObjectMapping }
	}
	{ ToNode
	    { SymbolFunc uml_message_to_end }
	    { MappingName ObjectMapping }
	}
	{ NameIsRequired True }
    }
}

CntxSymbol 231 RevBalkingMessage
{
    { PrintName "Balking Message" }
    { Shape { Predefined RevArrowParamWithArc } }
    { OrientWithArc True }
    { ParentLink ObjectLink }
    { LinkMapping
	{ MappingName MessageInstanceMapping }
	{ InverseMapFunc uml_message_inverse_mapping }
	{ AppType UmlBalkingMessage }
	{ NameFunc	uml_gde_link_name_func }
	{ FromNode
	    { SymbolFunc uml_message_to_end }
	    { MappingName ObjectMapping }
	}
	{ ToNode
	    { SymbolFunc uml_message_from_end }
	    { MappingName ObjectMapping }
	}
	{ NameIsRequired True }
    }
}

CntxSymbol 240 TimeoutMessage
{
    { PrintName "Timeout Message" }
    { Shape
        { Predefined ArrowParamWithClock }
        { ToolbarImage "timeout_message" }
    }
    { OrientWithArc True }
    { ParentLink ObjectLink }
    { LinkMapping
	{ MappingName MessageInstanceMapping }
	{ InverseMapFunc uml_message_inverse_mapping }
	{ AppType UmlTimeoutMessage }
	{ NameFunc	uml_gde_link_name_func }
	{ FromNode
	    { SymbolFunc uml_message_from_end }
	    { MappingName ObjectMapping }
	}
	{ ToNode
	    { SymbolFunc uml_message_to_end }
	    { MappingName ObjectMapping }
	}
	{ NameIsRequired True }
    }
}

CntxSymbol 241 RevTimeoutMessage
{
    { PrintName "Timeout Message" }
    { Shape { Predefined RevArrowParamWithClock } }
    { OrientWithArc True }
    { ParentLink ObjectLink }
    { LinkMapping
	{ MappingName MessageInstanceMapping }
	{ InverseMapFunc uml_message_inverse_mapping }
	{ AppType UmlTimeoutMessage }
	{ NameFunc	uml_gde_link_name_func }
	{ FromNode
	    { SymbolFunc uml_message_to_end }
	    { MappingName ObjectMapping }
	}
	{ ToNode
	    { SymbolFunc uml_message_from_end }
	    { MappingName ObjectMapping }
	}
	{ NameIsRequired True }
    }
}

CntxSymbol 250 AsynchronousMessage
{
    { PrintName "Asynchronous Message" }
    { Shape
        { Predefined HalfArrowParam }
        { ToolbarImage "asynchronous_message" }
    }
    { OrientWithArc True }
    { ParentLink ObjectLink }
    { LinkMapping
	{ MappingName MessageInstanceMapping }
	{ InverseMapFunc uml_message_inverse_mapping }
	{ AppType UmlAsynchronousMessage }
	{ NameFunc	uml_gde_link_name_func }
	{ FromNode
	    { SymbolFunc uml_message_from_end }
	    { MappingName ObjectMapping }
	}
	{ ToNode
	    { SymbolFunc uml_message_to_end }
	    { MappingName ObjectMapping }
	}
	{ NameIsRequired True }
    }
}

CntxSymbol 251 RevAsynchronousMessage
{
    { PrintName "Asynchronous Message" }
    { Shape { Predefined RevHalfArrowParam } }
    { OrientWithArc True }
    { ParentLink ObjectLink }
    { LinkMapping
	{ MappingName MessageInstanceMapping }
	{ InverseMapFunc uml_message_inverse_mapping }
	{ AppType UmlAsynchronousMessage }
	{ NameFunc	uml_gde_link_name_func }
	{ FromNode
	    { SymbolFunc uml_message_to_end }
	    { MappingName ObjectMapping }
	}
	{ ToNode
	    { SymbolFunc uml_message_from_end }
	    { MappingName ObjectMapping }
	}
	{ NameIsRequired True }
    }
}

CntxSymbol 260 ReturnMessage
{
    { PrintName "Return Message" }
    { Shape
        // ECR107 changed Predefined
        { Predefined DashedArrowParam }
        { ToolbarImage "return_message" }
    }
    { CanHaveLabel True }
    { OrientWithArc True }
    { ParentLink ObjectLink }
    { LinkMapping
	{ MappingName MessageInstanceMapping }
        { InverseMapFunc uml_message_inverse_mapping }
	{ AppType UmlReturnMessage }
	{ NameFunc	uml_gde_link_name_func }
	//{ SigFunc	booch_message_sig }
	{ FromNode
	    { SymbolFunc uml_message_from_end }
	    { MappingName ObjectMapping }
	}
	{ ToNode
	    { SymbolFunc uml_message_to_end }
	    { MappingName ObjectMapping }
	}
// 	{ Scope
// 	      //{ MappingName ObjectDiagScopeMapping }
// 	    { SymbolFunc uml_instance_owner_scope }
// 	}
	{ NameIsRequired True }
    }
}

CntxSymbol 261 RevReturnMessage
{
    { PrintName "Return Message" }
// ECR 6577 
    //{ Shape { Predefined RevArrowParam } }
    { Shape { Predefined RevDashedArrowParam } }
// ECR 6577 end
    { CanHaveLabel True }
    { OrientWithArc True }
    { ParentLink ObjectLink }
    { LinkMapping
	{ MappingName MessageInstanceMapping }
	{ InverseMapFunc uml_message_inverse_mapping }
	{ AppType UmlReturnMessage }
	{ NameFunc	uml_gde_link_name_func }
	//{ SigFunc	booch_message_sig }
	{ FromNode
	    { SymbolFunc uml_message_to_end }
	    { MappingName ObjectMapping }
	}
	{ ToNode
	    { SymbolFunc uml_message_from_end }
	    { MappingName ObjectMapping }
	}
// 	{ Scope
// 	      //{ MappingName ObjectDiagScopeMapping }
// 	    { SymbolFunc uml_instance_owner_scope }
// 	}
	{ NameIsRequired True }
    }
}

TypeSet MessageSymbols
{
    SimpleMessage			RevSimpleMessage
    SynchronousMessage			RevSynchronousMessage
    BalkingMessage			RevBalkingMessage
    TimeoutMessage			RevTimeoutMessage
    AsynchronousMessage			RevAsynchronousMessage
    ReturnMessage			RevReturnMessage
}

TypeSet OperationMessageCntxSymbols
{
    SimpleMessage			RevSimpleMessage
    SynchronousMessage			RevSynchronousMessage
    BalkingMessage			RevBalkingMessage
    TimeoutMessage			RevTimeoutMessage
    ReturnMessage			RevReturnMessage
}

TypeSet SignalMessageCntxSymbols
{
    AsynchronousMessage			RevAsynchronousMessage
}

CntxSymbol	MessageSymbols
{
    { NameCompletion
	{ MappingName MessageInstanceMapping }
        { NameCompletionFunc uml_message_name_completion_func }
    }
    { CanApplyScaleCmd False }
    { CanHaveLabel True }
    { DefaultSize 1.0 1.0 }
    { Align False }
    { DisplayMark
	{ Name StereotypeMessage }
	{ ItemCond (UmlStereotype) }
	{ CallUncond False }
	{ StringMarkFunc "uml_label_mark_func_get_default(gde_dmark_matched_items,\"Message\");" }
	{ Anchor UpperCenter }
	{ HAdjust Center }
	{ VAdjust Bottom } // Top
	{ Help "Constant <<Message>> String" }
    }
    { NoteMapping
 	{ Owner
 	    { MappingName MessageInstanceMapping }
 	    { Symbol Self }
 	}
 	{ AppType UmlMessageNote }
	{ NameFunc uml_MessageNote_name }
    }
    { ItemMapping
 	{ MappingName MessageName }
 	{ AppType UmlObjectName }
 	{ NoteAppType UmlMessageNote }
 	{ ValueFunc uml_message_MessageName }
 	{ InverseMapFunc gde_no_op_inverse_item_map_func }
    }
    { ItemMapping
 	{ MappingName ReturnType }
 	{ AppType UmlReturnType }
 	{ NoteAppType UmlMessageNote }
 	{ ValueFunc uml_message_ReturnType }
 	{ InverseMapFunc gde_no_op_inverse_item_map_func }
    }
    { ItemMapping
 	{ MappingName MessageArgs }
 	{ AppType UmlMessageArgs }
 	{ NoteAppType UmlMessageNote }
 	{ ValueFunc uml_message_MessageArgs }
 	{ InverseMapFunc gde_no_op_inverse_item_map_func }
    }
    { ItemMapping
	{ MappingName PredecessorGuard }
	{ AppType UmlPredecessorGuard }
	{ NoteAppType UmlMessageNote }
	{ ValueFunc uml_message_PredecessorGuard }
 	//{ InverseMapFunc gde_no_op_inverse_item_map_func }
 	{ InverseMapFunc uml_message_inverse_mapping_items }
    }
    { ItemMapping
	{ MappingName MessageSequence }
	{ AppType UmlSequenceExpression }
	{ NoteAppType UmlMessageNote }
	{ ValueFunc uml_message_SequenceVal }
 	//{ InverseMapFunc gde_no_op_inverse_item_map_func }
 	{ InverseMapFunc uml_message_inverse_mapping_items }
    }
    { ItemMapping
	{ MappingName MessageRecurrence }
	{ AppType UmlMessageRecurrence }
	{ NoteAppType UmlMessageNote }
	{ ValueFunc uml_message_Recurrence }
 	//{ InverseMapFunc gde_no_op_inverse_item_map_func }
 	{ InverseMapFunc uml_message_inverse_mapping_items }
    }
    //{ SymbolicDependentsFunc message_symbols_depends_func }
    { ReplaceSet ( 
	SimpleMessage			RevSimpleMessage
	SynchronousMessage		RevSynchronousMessage
	BalkingMessage			RevBalkingMessage
	TimeoutMessage			RevTimeoutMessage
	AsynchronousMessage		RevAsynchronousMessage
	) }
    { RenameFunc uml_interact_message_rename }
}


TypeSet	AutoScaleNodes
{
    Actor
    Object
    CompositeObject
    Collaboration
}

NodeSymbol AutoScaleNodes
{
    { AutoScaleSmaller False }
    { AutoScaleLarger True }
    { CanApplyScaleCmd True }
}

Include "rules/stereotype_dm.rules.common"

// SPR 4052 Model management, different location of stereotype for packages
TypeSet StereotypeableOnPackageNodeSet
{
    Package
    PackageName
}

TypeSet StereotypeableOnSymbolNodeSet
{
    // nodes
    //Actor
    Collaboration
    //Object
    //TypeElement - needs special handling of the display mark 
}

TypeSet StereotypeableInLabelNodeSet
{
    Object
}

TypeSet StereotypeableLinkSet 
{
    // links
    ObjectLink
    CollaborationRole
}

TypeSet StereotypeableCntxSet 
{
    // links
    MessageSymbols
}

TypeSet DoubleClickNodeSyms
{
    Actor
    Collaboration
    Package
    PackageName
    //TypeElement  -- annots map to class.  Should maybe include?
}

NodeSymbol DoubleClickNodeSyms
{
    { Methods
        { Method
            { Name DoubleClick }
            { MethodFunc UmlCollaboration_ps_double_click }
        }
    }
}

LinkSymbol StereotypeableLinkSet
{
    { Methods
        { Method
            { Name DoubleClick }
            { MethodFunc UmlCollaborationLink_ps_double_click }
        }
    }
}

CntxSymbol StereotypeableCntxSet
{
    { Methods
        { Method
            { Name DoubleClick }
            { MethodFunc UmlCollaborationCntx_ps_double_click }
        }
    }
}



DisplayMarkGroups
{
    { Group
	{ Name CollaborationInfo}
        { DisplayMarks ( UnderlineEffect ActorStereotype TypeStereotype ) }
    }
    { ContinuousDisplayMarks
	(
		CollaborationInfo Stereotypes FullLabel
	)
    }
}

SymbolList
{
    { ShowStraightArc True }
    { ShowSpline True }
    { OrthogonalArcsAreAllowed True }
    { OrthogonalArcsAreDefault False }
    { Symbols
	(
	    Note
            SEPARATOR
	    Package
	    Collaboration
	    Actor
	    PassiveObject
	    PassiveCompositeObject
        MultiObject
	    TypeElement
	    InstanceAttribute
            SEPARATOR
	    SimpleMessage
	    ReturnMessage
	    SynchronousMessage
	    AsynchronousMessage
	    BalkingMessage
	    TimeoutMessage
	    ExtensionPoint
	)
    }
}



///////////////////////////////////////////////////////

Include "rules/ucollaborationd.gui" // menus and navigations
Include "rules/ucollaborationd_prop.gui"

///////////////////////////////////////////////////////

// Begin Add ECR3785
// TypeSet for all kind of uml node symbols
TypeSet NavigationNodeTypes
{
    Actor
    Package
    Object
    Collaboration
    ActiveCompositeObject
    CompositeObject
    ExtensionPoint
    TypeElement
}

// Included navigation targets for all kind of uml node symbols
Include "uml/rules/uml_navigation.rules"
// End Add ECR3785

// ECR 4052 Model Management
Include "rules/model_management.common"
Include "rules/ucollaborationd_toolbar_acr_types.rules" // ECR 3556

Include "rules/object_instance_rename.prop" //ECR 6433

IncludeIfExists "user/uml/rules/user_ucollaborationd.rules"


PassWord "59BB1D50"
