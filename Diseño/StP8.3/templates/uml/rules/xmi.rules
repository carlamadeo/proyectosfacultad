Menu XMISubMenu
{
// ECR 6149
    { Pin True }
    { Label "XMI" }
// ECR 6149 end
    { MenuEntry
        { Name ExportXMIModel }
        { Label "Export XMI Model..." } // ECR 7293 - added ellipsis
        { ActiveFunc stp_repos_is_open }  // ECR 7021
        { Builtin "EditorQrlEval stp_run_command(\"UmlModel\",\"ExportXMIModelClass\");" }
    }
    { MenuEntry
        { Name ImportXMIModel }
        { Label "Import XMI Model..." }  // ECR 7293 - added ellipsis
        { Builtin "EditorQrlEval stp_run_command(\"UmlModel\",\"ImportXMIModelClass\");" }
    }
}

Class 0 UmlModel
{
  { UseClassCommand ExportXMIModelClass }
  { ClassCommand 
      { Name "ExportXMIModelClass" }
      { Label "Export XMI Model..." } // ECR 7293 - added ellipsis
      { ShowPropsOnExec True }  
      { Type Builtin }
      { Command "EditorQrlEval stp2xmi(\"${prop.output_file}\",${prop.generate_imf},False,\"\");" } //${prop.export_rose_ext}
  }
  { UseClassCommand ImportXMIModelClass }
  { ClassCommand 
      { Name "ImportXMIModelClass" }
      { Label "Import XMI Model..." } // ECR 7293 - added ellipsis
      { ShowPropsOnExec True }  
      { Type Builtin }
	  //ECR5169
      { Command "EditorQrlEval xmi2stp(\"${prop.input_file}\",\"${prop.target_projdir}\",${prop.scripts_fast});" }
  }
}

Class 0 UmlPackageObjects
{
  { UseObjectCommand ExportXMIModelObject }
  { ObjectCommand
      { Name "ExportXMIModelObject" }
      { Label "Export XMI Model for Package..." }
      { ShowPropsOnExec True }
      { Type Builtin }
      { Command "EditorQrlEval stp2xmi(\"${prop.output_file}\",${prop.generate_imf},False,\"${cmd.objects}\");" } //${prop.export_rose_ext}
  }
}

Global 1 ExportXMIModelClass
{
    { ClassCommand
        { Name "ExportXMIModelClass" }
        { Label "Export XMI Model" }
        { Command "" }
        { Chdir False }
        { SingleObject False }
        { UseProperty XMIDefaultOutputFile }
        { Properties
            { Qrl { QrlFile "rules/qrl/xmi.qrl" } } //ECR 5223
            // ECR 4506 start
            { Group
                { Name "file_group" }
                { Label "" }
                { Type Horizontal }
                { Resizable ResizeAny }
                { ChildSizePolicy ResizeWidth }
                { LayoutPolicy ResizeAny }
                { VerticalAlign AlignLabels }
                { Members ( output_file browse_for_file ) }
            }
            // ECR 4506 end
            { Group
                { Name "Options1" }
                { Label "Options:" }
                { Type Vertical }
                { Resizable ResizeAny }
                { ChildSizePolicy ResizeWidth }
                { LayoutPolicy ResizeAny }
                { HorizontalAlign AlignLabels }
                // ECR 4506 start
                // { Members ( output_file generate_imf export_rose_ext ) }
                { Members ( file_group generate_imf ) } // export_rose_ext
                // ECR 4506 end
            }
            { TopGroup
                { Align Left }
                { Members ( Options1 ) }
            }
        }
    }
}

Global 1 ExportXMIModelObject
{
    { ObjectCommand
        { Name "ExportXMIModelObject" }
        { Label "Export XMI Model for Package" }
        { Command "" }
        { Chdir False }
        { SingleObject False }
        { UseProperty XMIDefaultOutputFile }
        { Properties
            { Qrl { QrlFile "rules/qrl/xmi.qrl" } }  // ECR 5223
            // ECR 4506 start
            { Group
                { Name "file_group" }
                { Label "" }
                { Type Horizontal }
                { Resizable ResizeAny }
                { ChildSizePolicy ResizeWidth }
                { LayoutPolicy ResizeAny }
                { VerticalAlign AlignLabels }
                { Members ( output_file browse_for_file ) }
            }
            // ECR 4506 end
            { Group
                { Name "Options1" }
                { Label "Options:" }
                { Type Vertical }
                { Resizable ResizeAny }
                { ChildSizePolicy ResizeWidth }
                { LayoutPolicy ResizeAny }
                { HorizontalAlign AlignLabels }
                // ECR 4506 start
                // { Members ( output_file generate_imf export_rose_ext ) }
                { Members ( file_group generate_imf ) } //export_rose_ext
                // ECR 4506 end
            }
            { TopGroup
                { Align Left }
                { Members ( Options1 ) }
            }
        }
    }
}

Global 1 XMIDefaultOutputFile
{
    { Properties
        { Qrl { QrlFile "rules/qrl/xmi.qrl" } } // ECR 4506
        { Text
            { Name "output_file" }
            { Label "Output File:" }
            { Resizable ResizeAny}
            { Type Text }
            { MinLength 0 }
            { MaxLength 300 }
            { DispLength 60 }
            { InitVal "${projdir}${system}/src_files/${system}.xml" }
        }
        // ECR 4506 start
        { Button
            { Name "browse_for_file" }
            { Label "Choose" }
            { Event
                { Type Select }
                { Callback "select_xml_output_file_callback" }
            }
        }
        // ECR 4506 end
        { Choice
            { Name "generate_imf" }
            { Type CheckBox }
            { ChoiceItem
                { Name "generate_imf" }
                { Label "Generate IMF File" }
                { OnValue "True" }
                { OffValue "False" }
                { Init On }
            }
        }
        //{ Choice
            //{ Name "export_rose_ext" }
            //{ Type CheckBox }
            //{ ChoiceItem
                //{ Name "export_rose_ext" }
                //{ Label "Export Component Broker Extensions" } // ECR 5252
                //{ OnValue "True" }
                //{ OffValue "False" }
                //{ Init On }
            //}
        //}
    }
}

Global 1 ImportXMIModelClass
{
    { ClassCommand
        { Name "ImportXMIModelClass" }
        { Label "Import XMI Model" }
        { Command "" }
        { Chdir False }
        { SingleObject False }
        { UseProperty XMIDefaultInputFile }
        { Properties
            { Qrl { QrlFile "rules/qrl/xmi.qrl" } }
            // ECR 4506 start
            // ECR 6154 Combined input_file and target_projdir pairs
            // into one group and make file_group a 2x2 RowCol so that
            // Motif will take care of alignement same as 
            // ECR 5940 for acd.rules
            { Group
                { Name "file_group" }
                { Label "" }
                { Type RowCol }
		{ Rows 2 }
		{ Columns 2 }
                { Resizable ResizeAny }
                { ChildSizePolicy ResizeWidth }
                { LayoutPolicy ResizeAny }
                { HorizontalAlign AlignLabels }
                { Members ( input_file browse_for_file target_projdir browse_for_folder ) }
            }
            // ECR 4506 end
            { Group
                { Name "Options1" }
                { Label "Options:" }
                { Type Vertical }
                { Resizable ResizeAny }
                { ChildSizePolicy ResizeWidth }
                { LayoutPolicy ResizeAny }
                { HorizontalAlign AlignLabels }
                // ECR 4506 start
                // { Members ( input_file target_projdir ) }
				//ECR5169
                { Members ( file_group scripts_fast ) }
                // ECR 4506 end
            }
            { TopGroup
                { Align Left }
                { Members ( Options1 ) }
            }
        }
    }
}

Global 1 XMIDefaultInputFile
{
    { Properties
        { Text
            { Name "input_file" }
            { Label "Input File:" }
            { Resizable ResizeAny}
            { Type Text }
            { MinLength 0 }
            { MaxLength 300 }
            { DispLength 60 }
            { InitVal "" }
        }
        // ECR 4506 start
        { Button
            { Name "browse_for_file" }
            { Label "Choose" }
            { Event
                { Type Select }
                { Callback "select_xml_input_file_callback" }
            }
        }
        // ECR 4506 end
        { Text
            { Name "target_projdir" }
            { Label "Target System Directory:" }
            { Resizable ResizeAny}
            { Type Text }
            { MinLength 0 }
            { MaxLength 300 }
            { DispLength 60 }
            { InitVal "${projdir}" }
        }
        // ECR 4506 start
        { Button
            { Name "browse_for_folder" }
            { Label "Choose" }
            { Event
                { Type Select }
                { Callback "select_output_projdir_callback" }
            }
        }
        // ECR 4506 end

		// ECR5169
		{ Choice
            { Name scripts_fast }
            { Label "Fast Rebuild Repository:" }
            { Type CheckBox }
			{ ChoiceItem
				{ Label "" }
				{ OnValue "True" }
				{ OffValue "False" }
			}
        }
    }
}

