<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<meta name="GENERATOR" content="Microsoft FrontPage 5.0">
<meta name="TEMPLATEBASE" content="Users Guide WebWorks Template">
<meta name="LASTUPDATED" content="01/24/02 09:18:20">
<title>Chapter 3 </title>
</head>

<body link="#0066CC" vlink="#800080" text="#000000" alink="#FF0000" bgcolor="#FFFFFF"
background="graphics/backgrnd.gif">

<p><img src="graphics/FLEX-lm.gif" align="left"
alt="FLEXlm icon"> </p>

<table width="331" border="0" align="right" cellpadding="0" cellspacing="0">
  <tr>
    <td><a href="TOC.htm#TOC"><img src="graphics/navtoc.gif" width="84" height="23"
    border="0" alt="TOC"> </a></td>
    <td><a href="chap2.htm"><img src="graphics/navprev.gif" width="80" height="23"
    border="0" alt="PREV"> </a></td>
    <td><a href="chap4.htm"><img src="graphics/navnext.gif" width="83" height="23"
    border="0" alt="NEXT"> </a></td>
    <td><a href="IX.htm"><img src="graphics/navidx.gif" width="84" height="23"
    border="0" alt="INDEX"> </a></td>
  </tr>
</table>

<p><br clear="all">
</p>

<hr align="left">

<blockquote>
<h2>
  <a name="894001"> </a>Chapter 3 
</h2>


<h2>
  <a name="916025"> </a>	 Multiple License Files
</h2><hr>


<p>
  <a name="894006"> </a>Since more than 2000 vendors have chosen FLEX<em>lm</em> as their license manager, chances are good that you will have to administer FLEX<em>lm</em> licenses from more than one vendor or multiple products from the same vendor.
</p>


<h3>
  <a name="894011"> </a>3.1	 Overview of Combining License Files
</h3>


<p>
  <a name="894015"> </a>When you are running FLEX<em>lm</em>-licensed products from multiple vendors, you may need to take steps to prevent licensing conflicts during installation. There are three ways you can accomplish this:
</p>

<ul>


  <li ><a name="894016"> </a>Multiple license server nodes, each running one <code>lmgrd</code> and one license file
  <li ><a name="894017"> </a>One license server node running one <code>lmgrd</code> and several license files
  <li ><a name="894018"> </a>One license server node running multiple <code>lmgrd</code>s and multiple license files
</ul>

<p>
  <a name="894019"> </a>Note that before v6, each <code>lmgrd</code> could read only a single license file. In the first option mentioned above, you will have more license servers to monitor; in the third option you have only one server but multiple <code>lmgrd</code>s to administer. 
</p>


<p>
  <a name="894024"> </a>If all applications and vendor daemons are FLEX<em>lm</em> v6.0+, <code>lmgrd</code> can process multiple license files, even when the hostids in each license file are different, so long as they refer to the same machine. For example, on UNIX:
</p>

<dl>
  <dl>
     <dt> <a name="894025"> </a><CODE>lmgrd -c <code><em>license_file_path_1</em></code>:<code><em>license_file_path_2</em></code> ...</CODE>
  </dl>
</dl>

<p>
  <a name="894026"> </a>Your product's license file(s) define the license server(s) by host name and hostid in the SERVER line(s) in the license file. If you have two or more products whose license servers run on the same node (as specified by the SERVER lines in the license files), you may be able to combine the license files into a single license file. You can combine two license files under the following conditions:
</p>

<ul>


  <li ><a name="894030"> </a>The number of SERVER lines in each file is the same. 
  <li ><a name="894031"> </a>The hostid field of each SERVER line in one file <em>exactly</em> matches the hostid field of each SERVER line in the other file. 
</ul>

<p>
  <a name="894032"> </a> Some possible reasons license files may not be compatible are: 
</p>

<ul>


  <li ><a name="894033"> </a>License files are set up to run on different server nodes, so hostids are different. 
  <li ><a name="894034"> </a>One file is set up for single server (has only one SERVER line), the other is set up for a three-server redundant license server (has multiple SERVER lines).
  <li ><a name="894035"> </a>One vendor uses a custom hostid algorithm, so the hostids on the SERVER lines are different, even though the files are for the same machine. 
</ul>

<p>
  <a name="894036"> </a>If your license files are compatible as described above, then you have the option of combining license files and running a single <code>lmgrd</code>, as described below in <a href="chap3.htm#894046">Section 3.1.1, "Combining License Files from Multiple Vendors."</a> If the license files are not compatible, then you must keep the license files separate and run separate copies of <code>lmgrd</code> for each license file, as described in <a href="chap3.htm#894086">Section 3.1.3, "Using Separate License Files on the Same Server Node."</a> 
</p>


<p>
  <a name="894043"> </a>Note that you are not required to combine compatible license files; you always have the option of running separate <code>lmgrd</code><em>s</em>, and there is virtually no performance or system-load penalty for running separate <code>lmgrd</code> processes.
</p>


<h4>
  <a name="894046"> </a>3.1.1	 Combining License Files from Multiple Vendors
</h4>


<p>
  <a name="894047"> </a>If your license files are compatible, you can combine them with any text editor. To combine license files, read all of the compatible license files into one file, then edit out the extra SERVER lines so that only one set of SERVER lines remains. Write out this data, and you have your combined license file. If you combine license files from multiple vendors, it is a good idea to keep a copy of the combined license file in each vendor's default license file location. This way, users can avoid having to set <code>LM_LICENSE_FILE</code>, because each package finds it's license information in the default place. On UNIX, you can do this with a symbolic link from each default location to the location of the combined license file.
</p>


<h4>
  <a name="894056"> </a>3.1.2	 FLEX<em>lm</em> Version Component Compatibility
</h4>


<p>
  <a name="894060"> </a>When you combine license files for two different FLEX<em>lm</em>-licensed products, it may be the case that those products do not use the same version of FLEX<em>lm</em>. FLEX<em>lm</em> is designed to handle this situation. There are two basic compatibility rules for FLEX<em>lm</em>:
</p>

<ul>


  <li ><a name="894071"> </a>A newer <code>lmgrd</code> can be used with an older vendor daemon, but a newer vendor daemon might not work properly with an older <code>lmgrd</code>.
  <li ><a name="894072"> </a>A newer vendor daemon (or <code>lmgrd</code>) can be used with an older client program, but a newer client program might not work properly with an older vendor daemon. 
</ul>

<p>
  <a name="894073"> </a>From these two compatibility rules come the simple rules for selecting which version of administration tools to use: 
</p>

<ul>


  <li ><a name="894075"> </a>Always use the newest version of <code>lmgrd</code> and the newest version of each vendor daemon.
  <li ><a name="894079"> </a>Use the newest FLEX<em>lm</em> utilities.
</ul>

<p>
  <a name="894080"> </a>For specific application programs, you can use either the new or the old version (of course, the vendor daemon for that application must be at least as new as the application itself). See also <a href="chap15.htm#916243">Section H.1, "Version Compatibility and Components."</a>
</p>


<h4>
  <a name="894086"> </a>3.1.3	 Using Separate License Files on the Same Server Node
</h4>


<p>
  <a name="894087"> </a>You must run a separate copy of <code>lmgrd</code> for each license file. When you run multiple copies of <code>lmgrd</code>, there are two details to remember:
</p>

<ol type="1">


  <li  value="1"><a name="894088"> </a>The port number on the SERVER line of each license file must be unique. You can use a standard text editor to change the port number in each license file so that they are all different. 
  <li  value="2"><a name="894089"> </a>You must make sure that you are using a compatible version of <code>lmgrd</code> when you start it up for a particular license file. This can be done by using an explicit path to <code>lmgrd</code>.
</ol>

<p>
  <a name="894090"> </a>When running client programs (such as a licensed application), you can set the <code>LM_LICENSE_FILE</code> environment variable to point to multiple license files. For example, you may have a license file from vendor "ABC" and a license file from vendor "XYZ" with incompatible servers. You can place the license file from vendor "ABC" into:
</p>

<dl>
  <dl>
     <dt> <a name="894094"> </a><CODE>/usr/flexlm/abc.lic</CODE>
  </dl>
</dl>

<p>
  <a name="894095"> </a>and the license file from vendor "XYZ" into:
</p>

<dl>
  <dl>
     <dt> <a name="894096"> </a><CODE>/usr/flexlm/xyz.lic</CODE>
  </dl>
</dl>

<p>
  <a name="894100"> </a>then set the <code>LM_LICENSE_FILE</code> environment variable to point to both of them. Each name in <code>LM_LICENSE_FILE</code> should be separated by a colon (" : ") on UNIX systems and a semicolon (" ; ") on Windows and Windows/NT systems.
</p>


<p>
  <a name="894107"> </a>In the C shell:
</p>

<dl>
  <dl>
     <dt> <a name="894111"> </a><CODE>setenv LM_LICENSE_FILE /usr/flexlm/abc.lic:/usr/flexlm/xyz.lic</CODE>
  </dl>
</dl>

<p>
  <a name="894112"> </a>In the Korn and Bourne shells:
</p>

<dl>
  <dl>
     <dt> <a name="894116"> </a><CODE>LM_LICENSE_FILE=/usr/flexlm/abc.lic:/usr/flexlm/xyz.lic</CODE>
     <dt> <a name="894120"> </a><CODE>export LM_LICENSE_FILE</CODE>
  </dl>
</dl>

<h3>
  <a name="894128"> </a>3.2	 Using LM_LICENSE_FILE License-File List 
</h3>


<p>
  <a name="894129"> </a>If products use different license server nodes, each set of license servers requires separate license files. (When multiple software vendors use the same set of license server nodes, the technique described above in <a href="chap3.htm#894011">Section 3.1, "Overview of Combining License Files,"</a> can be used to combine license files.) The resulting (multiple) license files can be installed in convenient locations. On UNIX you would set the <code>LM_LICENSE_FILE</code> environment variable as follows:
</p>

<dl>
  <dl>
     <dt> <a name="894139"> </a><CODE>setenv <code>LM_LICENSE_FILE</code> <code><em>lfpath1</em></code>:<code><em>lfpath2</em></code>:...</CODE>
  </dl>
</dl>

<p>
  <a name="894140"> </a>where <code><em>lfpath1</em></code> is the path to the first license file, <code><em>lfpath2</em></code> is the path to the second license file, etc.
</p>


<p>
  <a name="894141"> </a><HR WIDTH=75%><FONT COLOR=RED>Note:	 Use a colon (" : ") to separate the license file names on UNIX and on Windows use a semicolon (" ; ").</FONT><HR WIDTH=75%>
</p>


<p>
  <a name="894142"> </a>Each application queries each license file in the order it is listed in <code>LM_LICENSE_FILE</code>. If the license server serving the license file listed in <code><em>lfpath1</em></code> is unreachable, the other files listed in <code>LM_LICENSE_FILE</code> allow a user to obtain a license from another server. <code><em>lfpathn</em></code> can also be <code><em>port</em></code><code>@</code><code><em>host</em></code>, using the port number and host name from the SERVER line in the license file.
</p>


<p>
  <a name="894149"> </a>See also:
</p>

<ul>


  <li ><a name="894152"> </a><a href="chap4.htm#914907">Section 4.3.1, "Redundancy via License-File List"</a>
  <li ><a name="894157"> </a><a href="chap10.htm#915955">Appendix C, "FLEXlm Environment Variables"</a>
  <li ><a name="894161"> </a><a href="chap2.htm#893197">Section 2.1.2, "Setting the Path with an Environment Variable"</a>
</ul>
</blockquote>

<hr>

<table width="380" align="right" border="0" cellspacing="0" cellpadding="0">
  <tr>
    <td align=left width="215"><em>FLEXlm  End Users Guide</em>
  </tr>
    <td align=left width="165"><em>February 2002</em></td>
</table>

<table width="331" border="0" align="left" cellpadding="0" cellspacing="0">
  <tr>
    <td><a href="TOC.htm#TOC"><img src="graphics/navtoc.gif" width="84" height="23"
    border="0" alt="TOC"> </a></td>
    <td><a href="chap2.htm"><img src="graphics/navprev.gif" width="80" height="23"
    border="0" alt="PREV"> </a></td>
    <td><a href="chap4.htm"><img src="graphics/navnext.gif" width="83" height="23"
    border="0" alt="NEXT"> </a></td>
    <td><a href="IX.htm"><img src="graphics/navidx.gif" width="84" height="23"
    border="0" alt="INDEX"> </a></td>
  </tr>
</table>
</body>
</html>